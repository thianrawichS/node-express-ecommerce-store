<%-include('header') %>

<div class="container-lg">

    <div class="mt-3">
        <form method="get" action="/sales-report/product" class="d-flex justify-content-start">
            <div>
                <select name="orderBy" class="form-select">
                    <option value="" disabled selected> Order By </option>
                    <option value="total_income">Total Income</option>
                    <option value="total_quantity">Total Quantity</option>
                </select>
            </div>
            <div class="ms-2">
                <button type="submit" class="btn btn-outline-primary btn-sm"> Show Results </button>
            </div>
        </form>
    </div>

    <div class="mt-3">
        <table class="table">
            <thead>
                <tr>
                    <th>Barcode</th>
                    <th>Product</th>
                    <th>Total Income</th>
                    <th>Total Quantity</th>
                </tr>
            </thead>
            <tbody>
            <% if (perProductResults.length === 0) { %>
                <tr>
                    <td colspan="4" class="text-center"> No Records </td>
                </tr>
            <% } else { %>
                <% perProductResults.forEach(p => { %>
                <tr>
                    <td><%= p.barcode %></td>
                    <td><%= p.product_name %></td>
                    <td><%= p.total_income %></td>
                    <td><%= p.total_quantity %></td>
                </tr>
                <% }) %>
            <% } %>
            </tbody>
        </table>
    </div>

</div>

<%-include('footer') %>